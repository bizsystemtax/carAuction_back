<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="PenaltyOcrDAO">

	<select id="countSimilarRecords"
		parameterType="egovframework.penalty.PenaltyOcrVO" resultType="int">
		SELECT COUNT(*)
		FROM biz_fine_mas
		WHERE VLT_DT = #{vltDt}
		AND VLT_ATIME = #{vltAtime}
		AND VHCL_NO = #{vhclNo}
	</select>


	<insert id="insertOcr" parameterType="egovframework.penalty.PenaltyOcrVO">
		INSERT INTO biz_fine_mas (
			   VHCL_NO, -- 차량번호 
			   VLT_DT, -- 위반일자
			   VLT_ATIME, -- 위반시각
			   FINE_AMT, -- 범칙금
		       FIRST_REGR_ID, -- 최초 등록자 ID 
			   FIRST_REG_TSTMP,-- 최초 등록 시간
			   FIRST_REG_IP_ADDR, -- 최초 등록 IP 주소
			   LAST_CHNGMN_ID, -- 최종 변경자 ID
			   LAST_CHGE_TSTMP,-- 최종 변경 시간
			   LAST_CHGE_IP_ADDR, -- 최종 변경 IP 주소
			   <if test="vltCts != null">
					VLT_CTS,-- 위반내용
			   </if>
			   <if test="vltPnt != null">
			   		VLT_PNT,-- 위반장소
			   </if>
			   <if test="ntcdocDocNo != null">
			   		NTCDOC_DOC_NO,-- 고지서번호
			   </if>
			   <if test="sendEmpNo != null">
			   		SEND_EMP_NO,-- 발급관청
			   </if>
			   <if test="pymtDdayDt != null">
			  		PYMT_DDAY_DT,-- 납부기한일자
			   </if>
			   <if test="actBankNm1 != null">
			   		ACT_BANK_NM1,-- 납부은행
			   </if>
			   <if test="actNo1 != null">
			  		 ACT_NO1-- 납부계좌
			   </if>
		) VALUES (
				#{vhclNo}, -- 차량번호
				#{vltDt}, -- 위반일자
				#{vltAtime}, -- 위반시각
				#{fineAmt}, -- 범칙금
				#{firstRegrId}, -- 최초 등록자 ID
				CURRENT_TIMESTAMP(), -- 최초 등록 시간
				#{firstRegIpAddr}, -- 최초 등록 IP 주소
				#{lastChngmnId}, -- 최종 변경자 ID
				CURRENT_TIMESTAMP(), -- 최종 변경 시간
				#{lastChgeIpAddr}, -- 최종 변경 IP 주소
				<if test="vltCts != null">
					#{vltCts},-- 위반내용
				</if>
				<if test="vltPnt != null">
					#{vltPnt},-- 위반장소
				</if>
				<if test="ntcdocDocNo != null">
					#{ntcdocDocNo},-- 고지서번호
				</if>
				<if test="sendEmpNo != null">
					#{sendEmpNo},-- 발급관청
				</if>
				<if test="pymtDdayDt != null">
					#{pymtDdayDt},-- 납부기한일자
				</if>
				<if test="actBankNm1 != null">
					#{actBankNm1},-- 납부은행
				</if>
				<if test="actNo1 != null">
					#{actNo1}-- 납부계좌
				</if>
		)
	</insert>
</mapper>