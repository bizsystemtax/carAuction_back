<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="myPageDAO">
	
	<resultMap id="MyPageVO" type="egovframework.carauction.MyPageVO">
	  	<result property = "codeFirst"		    column = "CODE_FIRST"/>
	  	<result property = "codeSecond"		    column = "CODE_SECOND"/>
	  	<result property = "codeNo"		        column = "CODE_NO"/>
	  	<result property = "codeHname"		    column = "CODE_HNAME"/>
	  	<result property = "codeKita1"		    column = "CODE_KITA1"/>
	  	<result property = "codeKita2"		    column = "CODE_KITA2"/>
	  	<result property = "codeKita3"		    column = "CODE_KITA3"/>
	  	<result property = "codeKita4"		    column = "CODE_KITA4"/>
	  	<result property = "codeKita5"		    column = "CODE_KITA5"/>
	  	<result property = "codeUseyn"		    column = "CODE_USEYN"/>
	  	<result property = "sortOrder"		    column = "SORT_ORDER"/>
	  	<result property = "mkrCd"		        column = "MKR_CD"/>
	  	<result property = "carModelCd"		    column = "CAR_MODEL_CD"/>
	  	<result property = "carModelNm"		    column = "CAR_MODEL_NM"/>
	  	<result property = "repCarYn"		    column = "REP_CAR_YN"/>
	  	<result property = "carLevelCd"		    column = "CAR_LEVEL_CD"/>
	  	<result property = "carLevelNm"		    column = "CAR_LEVEL_NM"/>
	 	<result property = "carDtLevelCd"	    column = "CAR_DT_LEVEL_CD"/>
	  	<result property = "carDtLevelName"	  	column = "CAR_DT_LEVEL_NAME"/>
	  	<result property = "carKindCd"		    column = "CAR_KIND_CD"/>
	  	<result property = "makeStrtYrMn"		column = "MAKE_STRT_YR_MN"/>
		<result property = "makeEndYrMn"		column = "MAKE_END_YR_MN"/>
		<result property = "carCc"		        column = "CAR_CC"/>
		<result property = "useYn"		        column = "USE_YN"/>
		<result property = "aucCarCc"		    column = "AUC_CAR_CC"/>
		<result property = "aucCarSeat"		    column = "AUC_CAR_SEAT"/>
		<result property = "carNo"		        column = "CAR_NO"/>
		<result property = "aucCarCmnt"		    column = "AUC_CAR_CMNT"/>
		<result property = "aucCarMakeYr"		column = "AUC_CAR_MAKE_YR"/>
		<result property = "aucCarDrvDis"		column = "AUC_CAR_DRV_DIS"/>
		<result property = "bidPlnPrice"		column = "BID_PLN_PRICE"/>
		<result property = "bidExpDt"		    column = "BID_EXP_DT"/>
		<result property = "eomYn"		        column = "EOM_YN"/>
		<result property = "eomPrice"		    column = "EOM_PRICE"/>
		<result property = "bidCnt"		        column = "BID_CNT"/>
		<result property = "aucProgYn"		    column = "AUC_PROG_YN"/>
		<result property = "sbidmnNm"		    column = "SBIDMN_NM"/>
		<result property = "aucRegSeq"		    column = "AUC_REG_SEQ"/>
		<result property = "bidmnNm"		    column = "BIDMN_NM"/>
		<result property = "bidmnCellno"		column = "BIDMN_CELLNO"/>
		<result property = "bidmnEmailAddr"	  	column = "BIDMN_EMAIL_ADDR"/>
		<result property = "bidPrice"		    column = "BID_PRICE"/>
		<result property = "bidEntryDate"		column = "BID_ENTRY_DATE"/>
		<result property = "depBankNm"		    column = "DEP_BANK_NM"/>
		<result property = "depAcc"		        column = "DEP_ACC"/>
		<result property = "depmnNm"		    column = "DEPMN_NM"/>
		<result property = "aucProgStatCd"		column = "AUC_PROG_STAT_CD"/>
		<result property = "sbidYn"		        column = "SBID_YN"/>
		<result property = "pomPayYn"		    column = "POM_PAY_YN"/>
		<result property = "carPrice"		    column = "CAR_PRICE"/>
		<result property = "carMainNo"		    column = "CAR_MAIN_NO"/>
		<result property = "locImpGb"		    column = "LOC_IMP_GB"/>
		<result property = "carEngCd"		    column = "CAR_ENG_CD"/>
		<result property = "carTransGb"		    column = "CAR_TRANS_GB"/>
		<result property = "aucRegNo"		    column = "AUC_REG_NO"/>
		<result property = "bidSdepPrice"		column = "BID_SDEP_PRICE"/>
		<result property = "sbidPrice"	     	column = "SBID_PRICE"/>
		<result property = "sbidDate"		    column = "SBID_DATE"/>
		<result property = "entryDate"		    column = "ENTRY_DATE"/>
		<result property = "entryIdno"		    column = "ENTRY_IDNO"/>
		<result property = "updatDate"		    column = "UPDAT_DATE"/>
		<result property = "updatIdno"		    column = "UPDAT_IDNO"/>
		<result property = "regStrDt"		    column = "REG_STR_DT"/>
		<result property = "regEndDt"		    column = "REG_END_DT"/>
		<result property = "proState"		    column = "PRO_STATE"/>
		<result property = "fuelType"			column = "FUEL_TYPE"/>
		<result property = "carTransNm"			column = "CAR_TRANS_NM"/>
		<result property = "aucProgStatNm"		column = "AUC_PROG_STAT_NM"/>
		<result property = "fromDt"				column = "fromDt"/>
		<result property = "toDt"				column = "toDt"/>
		<result property = "RNUM"				column = "RNUM"/>
		<result property = "realDepPrice"		column = "REAL_DEP_PRICE"/>
		<result property = "entryIdnoNm"		column = "ENTRY_IDNO_NM"/>
		<result property = "sdepPayYn"			column = "SDEP_PAY_YN"/>
		<result property = "sdepPayNm"			column = "SDEP_PAY_NM"/>
		<!-- <result property = "sbidAucSeq"			column = "SBID_AUC_SEQ"/> -->
	</resultMap>
	
	<!-- 콤보박스 진행상태 조회 -->
	<select id="comboBoxList" parameterType="egovframework.carauction.MyPageVO" resultType="egovframework.carauction.MyPageVO">
		<![CDATA[
			SELECT CODE_NO    /*코드번호*/
			     , CODE_HNAME /*코드명*/
			  FROM CA_CMM_CD 
		 	WHERE CODE_USEYN = 'Y'
		  	 AND CONCAT(CODE_FIRST, CODE_SECOND) = 'S01'
		]]>

	</select>
	
	<!-- 마이페이지 - 내 판매차량 입찰 상세 현황 -->
	<select id="myPageList" parameterType="egovframework.carauction.MyPageVO" resultType="egovframework.carauction.MyPageVO">
		<![CDATA[
			SELECT ROW_NUMBER() OVER (ORDER BY CCAI.ENTRY_DATE DESC) AS RNUM
			     , CCAI.AUC_REG_NO  /*경매등록번호*/
			     , CCAI.CAR_MAIN_NO /*차량관리번호*/
			     , CCAI.CAR_NO      /*차량번호*/
			     , CONCAT((SELECT CODE_HNAME FROM CA_CMM_CD WHERE CODE_NO = CCI.MKR_CD AND CONCAT(CODE_FIRST, CODE_SECOND) = 'C01'), ' ', CCI.CAR_MODEL_NM) AS CAR_MODEL_NM /*차량명*/
			     , CCAI.AUC_CAR_MAKE_YR /*연식*/
			     , (SELECT CODE_HNAME FROM CA_CMM_CD WHERE CODE_NO = CCAI.CAR_ENG_CD AND CONCAT(CODE_FIRST, CODE_SECOND) = 'C04') AS FUEL_TYPE /*연료*/
			     , FORMAT(CCAI.AUC_CAR_DRV_DIS, 0) AS AUC_CAR_DRV_DIS /*주행거리*/
			     , CCAI.CAR_TRANS_GB     /*변속기 구분*/
			     , CASE WHEN CCAI.CAR_TRANS_GB = 'A' THEN '오토'
			       ELSE '수동'
			        END AS CAR_TRANS_NM /*변속기명*/
			     , CONCAT(FORMAT(CCAI.BID_PLN_PRICE, 0), '원') AS BID_PLN_PRICE   /*입찰예정금액*/
			     , CONCAT(CCAI.BID_CNT, '건') AS BID_CNT         /*입찰건수*/
			     , DATE_FORMAT(CCAI.ENTRY_DATE, '%Y-%m-%d') AS ENTRY_DATE /*등록일*/
			     , (SELECT CODE_NO FROM CA_CMM_CD WHERE CODE_NO = CCAI.AUC_PROG_STAT_CD AND CONCAT(CODE_FIRST, CODE_SECOND) = 'S01') AS AUC_PROG_STAT_CD /*진행상태코드*/
			     , CASE WHEN CCAI.AUC_PROG_STAT_CD = '0010' THEN '경매진행중'
					    WHEN CCAI.AUC_PROG_STAT_CD = '0020' THEN '낙찰'
					    WHEN CCAI.AUC_PROG_STAT_CD = '0030' THEN '낙찰금액완납'
					    WHEN CCAI.AUC_PROG_STAT_CD = '0040' THEN '명의이전완료'
					    WHEN CCAI.AUC_PROG_STAT_CD = '0050' THEN '유찰'
				   ELSE ''
				    END AS AUC_PROG_STAT_NM /*진행상태명*/
			     , CONCAT(FORMAT(CCAI.SBID_PRICE, 0), '원') AS SBID_PRICE /*낙찰금액*/
			     , CCAI.SBID_DATE  /*낙찰일*/
			     , CCAI.ENTRY_IDNO /*낙찰 회원사명*/
			     , CCAI.AUC_PROG_YN /*진행상태 여부*/
			     , (SELECT USER_NM
			          FROM CA_USER_INF
			         WHERE USER_ID = #{entryIdno}
			       ) AS ENTRY_IDNO_NM
			  FROM CA_CAR_AUC_INF CCAI 
			 INNER JOIN CA_CAR_INF CCI 
			    ON CCAI.CAR_MAIN_NO = CCI.CAR_MAIN_NO 
			 WHERE CCAI.ENTRY_DATE BETWEEN #{regStrDt} AND #{regEndDt}  
		]]>
		<if test="proState != null and proState != ''">
		   AND CCAI.AUC_PROG_STAT_CD = #{proState} 
		</if>
		   AND CCAI.ENTRY_IDNO = #{entryIdno}
		 ORDER BY RNUM ASC 
	</select>
	
	<!-- 마이페이지 - 내 판매차량 입찰 상세 현황(경매(공매) 등록내용) -->
	<select id="mySaleCarAuctionRegList" parameterType="egovframework.carauction.MyPageVO" resultType="egovframework.carauction.MyPageVO">
		<![CDATA[
			SELECT ROW_NUMBER() OVER (ORDER BY CCAI.ENTRY_DATE DESC) AS RNUM /*순번*/
			     , CCAI.AUC_REG_NO  /*경매등록번호*/
			     , CCAI.CAR_MAIN_NO /*차량관리번호*/
			     , CCAI.CAR_NO      /*차량번호*/
			     , CONCAT((SELECT CODE_HNAME FROM CA_CMM_CD WHERE CODE_NO = CCI.MKR_CD AND CONCAT(CODE_FIRST, CODE_SECOND) = 'C01'), ' ', CCI.CAR_MODEL_NM) AS CAR_MODEL_NM /*차량명*/
			     , CCAI.AUC_CAR_MAKE_YR /*연식*/
			     , (SELECT CODE_HNAME FROM CA_CMM_CD WHERE CODE_NO = CCAI.CAR_ENG_CD AND CONCAT(CODE_FIRST, CODE_SECOND) = 'C04') AS FUEL_TYPE /*연료*/
			     , FORMAT(CCAI.AUC_CAR_DRV_DIS, 0) AS AUC_CAR_DRV_DIS /*주행거리*/
			     , CCAI.CAR_TRANS_GB     /*변속기 구분*/
			     , CASE WHEN CCAI.CAR_TRANS_GB = 'A' THEN '오토'
			       ELSE '수동'
			        END AS CAR_TRANS_NM /*변속기명*/
			     , CONCAT(FORMAT(CCAI.BID_PLN_PRICE, 0), '원') AS BID_PLN_PRICE   /*입찰예정금액*/
			     , CONCAT(CCAI.BID_CNT, '건') AS BID_CNT         /*입찰건수*/
			     , DATE_FORMAT(CCAI.ENTRY_DATE, '%Y-%m-%d') AS ENTRY_DATE /*등록일*/
			     , CONCAT(FORMAT(CCAI.BID_SDEP_PRICE, 0), '원') AS BID_SDEP_PRICE   /*입찰보증금액*/
			     , DATE_FORMAT(CCAI.BID_EXP_DT, '%Y-%m-%d') AS BID_EXP_DT /*입찰 유효일(마감일)*/
			     , CCAI.ENTRY_IDNO /*낙찰 회원사명*/
			     , CCAI.AUC_PROG_YN
			     , (SELECT CODE_NO FROM CA_CMM_CD WHERE CODE_NO = CCAI.AUC_PROG_STAT_CD AND CONCAT(CODE_FIRST, CODE_SECOND) = 'S01') AS AUC_PROG_STAT_CD /*진행상태코드*/
				 , CASE WHEN CCAI.AUC_PROG_STAT_CD = '0010' THEN '경매진행중'
				        WHEN CCAI.AUC_PROG_STAT_CD = '0020' THEN '낙찰'
				        WHEN CCAI.AUC_PROG_STAT_CD = '0030' THEN '낙찰금액완납'
				        WHEN CCAI.AUC_PROG_STAT_CD = '0040' THEN '명의이전완료'
				        WHEN CCAI.AUC_PROG_STAT_CD = '0050' THEN '유찰'
				        ELSE ''
				         END AS AUC_PROG_STAT_NM /*진행상태명*/
				 , (SELECT USER_NM
		              FROM CA_USER_INF
		             WHERE USER_ID = #{entryIdno}
		            ) AS ENTRY_IDNO_NM
			  FROM CA_CAR_AUC_INF CCAI
			 INNER JOIN CA_CAR_INF CCI 
			    ON CCAI.CAR_MAIN_NO = CCI.CAR_MAIN_NO 
			 WHERE CCAI.AUC_REG_NO = #{aucRegNo}
			 ORDER BY RNUM ASC 
		]]>
	</select>
	
	<!-- 유찰 -->
	<update id="faileBidUpdate"  parameterType="egovframework.carauction.MyPageVO">
		UPDATE CA_CAR_AUC_DTL_BID_INF
		   SET AUC_PROG_STAT_CD = '0050' /*경매진행상태코드*/
		     , SBID_YN = 'N'             /*낙찰여부*/
		     , UPDAT_DATE = NOW()        /*수정일시*/
		     , UPDAT_IDNO = #{updatIdno} /*수정자ID*/
		 WHERE AUC_REG_NO = #{aucRegNo}  /*경매등록번호*/
	</update>
	
	<update id="failecaCarAucInfUpdate"  parameterType="egovframework.carauction.MyPageVO">
		UPDATE CA_CAR_AUC_INF
		   SET AUC_PROG_STAT_CD = '0050' /*경매진행상태코드*/
		     , AUC_PROG_YN = 'N'         /*경매진행여부*/
		     , UPDAT_DATE = NOW()        /*수정일시*/
		     , UPDAT_IDNO = #{updatIdno} /*수정자ID*/
		 WHERE AUC_REG_NO = #{aucRegNo}  /*경매등록번호*/
	</update>
	
	<!-- 마이페이지 - 내 판매차량 입찰 상세 현황(입찰현황) -->
	<select id="mySaleCarBidList" parameterType="egovframework.carauction.MyPageVO" resultType="egovframework.carauction.MyPageVO">
		<![CDATA[
			SELECT ROW_NUMBER() OVER (ORDER BY AUC_REG_SEQ DESC) AS RNUM /*순번*/
			     , AUC_REG_NO /*경매등록번호*/
			     , AUC_REG_SEQ /*경매등록순번*/
			     , DATE_FORMAT(BID_ENTRY_DATE, '%Y-%m-%d') AS BID_ENTRY_DATE /*입찰등록일시*/
			     , DEPMN_NM /*입찰자명(입급자명)*/
			     , CONCAT(FORMAT(BID_PRICE, 0), '원') AS BID_PRICE /*입찰금액*/
			     , CONCAT(FORMAT(BID_SDEP_PRICE, 0), '원') AS BID_SDEP_PRICE /*입찰보증금액*/
			     , CONCAT(FORMAT(BID_PRICE - BID_SDEP_PRICE, 0), '원') AS REAL_DEP_PRICE /*실제입금예정액*/
			     , POM_PAY_YN /*대금납부완납여부*/
			     , DATE_FORMAT(SBID_DATE, '%Y-%m-%d') AS SBID_DATE /*낙찰일시*/
			     , AUC_PROG_STAT_CD /*경매진행 상태*/
			     , CASE WHEN AUC_PROG_STAT_CD = '0010' THEN '경매진행중'
				    WHEN AUC_PROG_STAT_CD = '0020' THEN '낙찰'
				    WHEN AUC_PROG_STAT_CD = '0030' THEN '낙찰금액완납'
				    WHEN AUC_PROG_STAT_CD = '0040' THEN '명의이전완료'
				    WHEN AUC_PROG_STAT_CD = '0050' THEN '유찰'
			   		ELSE ''
			    	 END AS AUC_PROG_STAT_NM /*진행상태명*/
			     , BIDMN_NM /*담당자명*/
			     , BIDMN_CELLNO /*담당자 연락처*/
			     , BIDMN_EMAIL_ADDR /*담당자 이메일*/
			     , SDEP_PAY_YN /*보증금완납여부*/
			     , CASE WHEN SDEP_PAY_YN = 'Y' THEN '완납'
			            ELSE '미 완납' 
			        END AS SDEP_PAY_NM /*보증금완납여부명*/
			  FROM CA_CAR_AUC_DTL_BID_INF
			 WHERE AUC_REG_NO = #{aucRegNo} 
			
		]]>
		  ORDER BY RNUM ASC 
	</select>
	
	
	<!-- 내 판매차량 입찰 상세 현황 - 콤보박스 진행상태 조회 -->
	<select id="statusComboBoxList" parameterType="egovframework.carauction.MyPageVO" resultType="egovframework.carauction.MyPageVO">
		<![CDATA[
			SELECT CODE_NO    /*코드번호*/
			     , CODE_HNAME /*코드명*/
			  FROM CA_CMM_CD 
		 	 WHERE CODE_USEYN = 'Y'
		  	   AND CONCAT(CODE_FIRST, CODE_SECOND) = 'S01'
		  	   AND CODE_NO != '0050'
		]]>

	</select>
	
	
	<!-- 내 입찰 현황 -->
	<select id="myBidList" parameterType="egovframework.carauction.MyPageVO" resultType="egovframework.carauction.MyPageVO">
		<![CDATA[
			SELECT ROW_NUMBER() OVER (ORDER BY CCAI.ENTRY_DATE DESC) AS RNUM
			     , CCAI.AUC_REG_NO  /*경매등록번호*/
			     , CCAI.CAR_MAIN_NO /*차량관리번호*/
			     , CCAI.CAR_NO      /*차량번호*/
			     , CONCAT((SELECT CODE_HNAME FROM CA_CMM_CD WHERE CODE_NO = CCI.MKR_CD AND CONCAT(CODE_FIRST, CODE_SECOND) = 'C01'), ' ', CCI.CAR_MODEL_NM) AS CAR_MODEL_NM /*차량명*/
			     , CCAI.AUC_CAR_MAKE_YR /*연식*/
			     , (SELECT CODE_HNAME FROM CA_CMM_CD WHERE CODE_NO = CCAI.CAR_ENG_CD AND CONCAT(CODE_FIRST, CODE_SECOND) = 'C04') AS FUEL_TYPE /*연료*/
			     , FORMAT(CCAI.AUC_CAR_DRV_DIS, 0) AS AUC_CAR_DRV_DIS /*주행거리*/
			     , CCAI.CAR_TRANS_GB     /*변속기 구분*/
			     , CASE WHEN CCAI.CAR_TRANS_GB = 'A' THEN '오토'
			       ELSE '수동'
			        END AS CAR_TRANS_NM /*변속기명*/
			     , CONCAT(FORMAT(CCAI.BID_PLN_PRICE, 0), '원') AS BID_PLN_PRICE   /*입찰예정금액*/
			     , CONCAT(CCAI.BID_CNT, '건') AS BID_CNT         /*입찰건수*/
			     , DATE_FORMAT(CCAI.ENTRY_DATE, '%Y-%m-%d') AS ENTRY_DATE /*입찰등록일(등록일시)*/
			     , (SELECT CODE_NO FROM CA_CMM_CD WHERE CODE_NO = CCAI.AUC_PROG_STAT_CD AND CONCAT(CODE_FIRST, CODE_SECOND) = 'S01') AS AUC_PROG_STAT_CD /*진행상태코드*/
			     , CASE WHEN CCAI.AUC_PROG_STAT_CD = '0010' THEN '경매진행중'
				        WHEN CCAI.AUC_PROG_STAT_CD IN('0020', '0030', '0040') AND CCAI.SBID_AUC_SEQ = CCADBI.AUC_REG_SEQ THEN '본인낙찰'
						WHEN CCAI.AUC_PROG_STAT_CD IN('0020', '0030', '0040') AND CCAI.SBIDMN_NM != CCADBI.BIDMN_NM THEN '제3자 낙찰'
					    WHEN CCAI.AUC_PROG_STAT_CD = '0050' THEN '유찰'
				   ELSE ''
				    END AS AUC_PROG_STAT_NM /*진행상태명*/
			     , CONCAT(FORMAT(CCADBI.BID_PRICE, 0), '원') AS BID_PRICE /*입찰금액*/
			 FROM CA_CAR_AUC_INF CCAI 
			 INNER JOIN CA_CAR_INF CCI 
			    ON CCAI.CAR_MAIN_NO = CCI.CAR_MAIN_NO
			 INNER JOIN CA_CAR_AUC_DTL_BID_INF CCADBI
			    ON CCAI.AUC_REG_NO = CCADBI.AUC_REG_NO
			 WHERE CCAI.ENTRY_DATE BETWEEN #{regStrDt} AND #{regEndDt}
			   AND CCADBI.ENTRY_IDNO = #{entryIdno}
		]]>
		<if test="proState != null and proState != ''">
			   AND CCAI.AUC_PROG_STAT_CD = #{proState} 
		</if>
		  ORDER BY RNUM ASC 
	</select>
	
	<!-- 내 판매차량 입찰 상세 현황 - 저장(차량경매상세입찰정보) -->
	<update id="caCarAucDtlBidInfUpdate"  parameterType="egovframework.carauction.MyPageVO">
		UPDATE CA_CAR_AUC_DTL_BID_INF
		   SET AUC_PROG_STAT_CD = #{aucProgStatCd} /*경매진행상태코드*/
		     , SBID_YN = #{aucProgYn} /*낙찰여부*/
		     , SBID_PRICE = #{bidPrice} /*입찰금액*/
		     , POM_PAY_YN = #{pomPayYn} /*대금납부완납여부*/
		     , SBID_DATE = DATE_FORMAT(NOW(), '%Y%m%d') /*낙찰일시*/
		     , UPDAT_DATE = NOW() /*수정일시*/
		     , UPDAT_IDNO = #{updatIdno} /*수정자ID*/
		 WHERE AUC_REG_NO = #{aucRegNo} /*경매등록번호*/
		   AND AUC_REG_SEQ = #{aucRegSeq} /*경매등록순번*/
	</update>
	
	<!-- 내 판매차량 입찰 상세 현황 - 저장(차량경매정보관리) -->
	<update id="caCarAucInfUpdate"  parameterType="egovframework.carauction.MyPageVO">
		UPDATE CA_CAR_AUC_INF
		   SET AUC_PROG_STAT_CD = #{aucProgStatCd} /*경매진행상태코드*/
		     , AUC_PROG_YN = #{aucProgYn} /*경매진행여부*/
		     , SBID_PRICE = #{bidPrice} /*입찰금액*/
		     , SBID_DATE = DATE_FORMAT(NOW(), '%Y%m%d') /*낙찰일시*/
		     , SBIDMN_NM = #{depmnNm} /*낙찰자명->> 입찰자명 */   
		     , UPDAT_DATE = NOW() /*수정일시*/
     		 , UPDAT_IDNO = #{updatIdno} /*수정자ID*/
     		 , SBID_AUC_SEQ	= #{aucRegSeq} /*낙찰경매순서*/
 		 WHERE AUC_REG_NO = #{aucRegNo} /*경매등록번호*/
	</update>
	
	<!-- 내 판매차량 입찰 상세 현황 - 선택되지 않은 행들 유찰 -->
	<update id="myBidInfoUnSelectedUpdate"  parameterType="egovframework.carauction.MyPageVO">
		UPDATE CA_CAR_AUC_DTL_BID_INF
		   SET AUC_PROG_STAT_CD = '0050'  /*경매진행상태코드*/
		     , SBID_YN = 'N'              /*낙찰여부*/
		     , UPDAT_DATE = NOW()         /*수정일시*/
		     , UPDAT_IDNO = #{updatIdno}  /*수정자ID*/
		 WHERE AUC_REG_NO = #{aucRegNo}   /*경매등록번호*/
		   AND AUC_REG_SEQ = #{aucRegSeq} /*경매등록순번*/
	</update>
	
	<!-- 보증금 수납처리 -->
	<update id="depositPaymentUpdate"  parameterType="egovframework.carauction.MyPageVO">
		UPDATE CA_CAR_AUC_DTL_BID_INF
		   SET SDEP_PAY_YN = #{sdepPayYn}  /*보증금완납여부*/
		     , UPDAT_DATE = NOW()         /*수정일시*/
		     , UPDAT_IDNO = #{updatIdno}  /*수정자ID*/
		 WHERE AUC_REG_NO = #{aucRegNo}   /*경매등록번호*/
		   AND AUC_REG_SEQ = #{aucRegSeq} /*경매등록순번*/
	</update>
	
</mapper>